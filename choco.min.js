/*!
 * @license choco.js Copyright(c) 2015 sasa+1
 * https://github.com/sasaplus1/choco.js
 * Released under the MIT license.
 */
!function(e,o){"use strict";"function"==typeof define&&define.amd?define(o):"object"==typeof exports?module.exports=o():e.choco=o()}((this||0).self||global,function(){"use strict";function choco(r,i,f){var s=typeof f;if("undefined"!==s&&"object"!==s)throw new TypeError("params must be an Object");if("object"===s&&"undefined"!=typeof f[e])throw new Error(e+" is reserved");return new Promise(function(u,c){var d,a,m=Math.floor(Math.random()*o),p=i+t,b=i+n;"undefined"===s&&(f={}),f[e]=m,r.on(p,d=function(o){o[e]===m&&(r.removeListener(p,d),r.removeListener(b,a),delete o[e],u(o))}),r.on(b,a=function(o){o[e]===m&&(r.removeListener(p,d),r.removeListener(b,a),delete o[e],c(o))}),r.emit(i,f)})}var e="__choco_id",o=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Math.pow(2,53)-1,t="-success",n="-failure";return choco});