/*!
 * @license choco.js Copyright(c) 2015 sasa+1
 * https://github.com/sasaplus1/choco.js
 * Released under the MIT license.
 */
!function(e,n){"use strict";"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n():e.choco=n()}((this||0).self||global,function(){"use strict";function e(e,n){var o,t,r=i(e),u={};for(o=0,t=r.length;t>o;++o)r[o]!==n&&(u[r[o]]=e[r[o]]);return u}function choco(i,u,f){var c=typeof f;if("undefined"!==c&&"object"!==c)throw new TypeError("params must be an Object");if("object"===c&&"undefined"!=typeof f[choco.id])throw new Error(choco.id+" is reserved");return new Promise(function(d,s){var a,p,b=Math.floor(Math.random()*n),y=u+o,l=u+t;"undefined"===c&&(f={}),f[choco.id]=b,i.on(y,a=function(n){return"object"!=typeof n?void r("result is not an Object",n):"number"!=typeof n[choco.id]?void r(choco.id+" is not a Number",n):void(n[choco.id]===b&&(i.removeListener(y,a),i.removeListener(l,p),d(e(n,choco.id))))}),i.on(l,p=function(n){return"object"!=typeof n?void r("result is not an Object",n):"number"!=typeof n[choco.id]?void r(choco.id+" is not a Number",n):void(n[choco.id]===b&&(i.removeListener(y,a),i.removeListener(l,p),s(e(n,choco.id))))}),i[choco.trigger](u,f)})}var n=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Math.pow(2,53)-1,o="-success",t="-failure",r=function(){if("undefined"!=typeof console){if("object"==typeof console.warn)return function(){Function.prototype.apply.call(console.warn,console,arguments)};if("undefined"!=typeof Function.prototype.bind)return console.warn.bind(console)}return function(){}}(),i="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var n,o=[];if(null===e||"object"!=typeof e)throw new TypeError("obj is not an Object");for(n in e)e.hasOwnProperty(n)&&o.push(n);return o};return choco.id="__choco_id",choco.trigger="emit",choco});