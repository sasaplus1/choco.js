/*!
 * @license choco.js Copyright(c) 2015 sasa+1
 * https://github.com/sasaplus1/choco.js
 * Released under the MIT license.
 */
!function(e,n){"use strict";"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n():e.choco=n()}((this||0).self||global,function(){"use strict";function choco(r,i,f){var s=typeof f;if("undefined"!==s&&"object"!==s)throw new TypeError("params must be an Object");if("object"===s&&"undefined"!=typeof f[e])throw new Error(e+" is reserved");return new Promise(function(c,u){var d,a,m=n?Date.now():+new Date,p=i+t,v=i+o;"undefined"===s&&(f={}),f[e]=m,r.on(p,d=function(n){n[e]===m&&(r.removeListener(p,d),r.removeListener(v,a),delete n[e],c(n))}),r.on(v,a=function(n){n[e]===m&&(r.removeListener(p,d),r.removeListener(v,a),delete n[e],u(n))}),r.emit(i,f)})}var e="__choco_id",n=!!Date.now,t="-success",o="-failure";return choco});