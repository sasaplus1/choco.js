/*!
 * @license choco.js Copyright(c) 2015 sasa+1
 * https://github.com/sasaplus1/choco.js
 * Released under the MIT license.
 */
!function(e,n){"use strict";"function"==typeof define&&define.amd?define(n):"object"==typeof exports?module.exports=n():e.choco=n()}((this||0).self||global,function(){"use strict";function e(e,n){var o,t,r=u(e),i={};for(o=0,t=r.length;t>o;++o)r[o]!==n&&(i[r[o]]=e[r[o]]);return i}function choco(u,f,c){var s=typeof c;if("undefined"!==s&&"object"!==s)throw new TypeError("params must be an Object");if("object"===s&&"undefined"!=typeof c[n])throw new Error(n+" is reserved");return new Promise(function(a,p){var d,b,y=Math.floor(Math.random()*o),l=f+t,m=f+r;"undefined"===s&&(c={}),c[n]=y,u.on(l,d=function(o){return"object"!=typeof o?void i("result is not an Object",o):"number"!=typeof o[n]?void i(n+" is not a Number",o):void(o[n]===y&&(u.removeListener(l,d),u.removeListener(m,b),a(e(o,n))))}),u.on(m,b=function(o){return"object"!=typeof o?void i("result is not an Object",o):"number"!=typeof o[n]?void i(n+" is not a Number",o):void(o[n]===y&&(u.removeListener(l,d),u.removeListener(m,b),p(e(o,n))))}),u[choco.trigger](f,c)})}var n="__choco_id",o=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Math.pow(2,53)-1,t="-success",r="-failure",i=function(){if("undefined"!=typeof console){if("object"==typeof console.warn)return function(){Function.prototype.apply.call(console.warn,console,arguments)};if("undefined"!=typeof Function.prototype.bind)return console.warn.bind(console)}return function(){}}(),u="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var n,o=[];if(null===e||"object"!=typeof e)throw new TypeError("obj is not an Object");for(n in e)e.hasOwnProperty(n)&&o.push(n);return o};return choco.trigger="emit",choco});