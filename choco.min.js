/*!
 * @license choco.js Copyright(c) 2015 sasa+1
 * https://github.com/sasaplus1/choco.js
 * Released under the MIT license.
 */
!function(e,o){"use strict";"function"==typeof define&&define.amd?define(o):"object"==typeof exports?module.exports=o():e.choco=o()}((this||0).self||global,function(){"use strict";function e(e,o){var n,t,r=u(e),i={};for(n=0,t=r.length;t>n;++n)r[n]!==o&&(i[r[n]]=e[r[n]]);return i}function choco(u,c,f){var s=typeof f;if("undefined"!==s&&"object"!==s)throw new TypeError("params must be an Object");if("object"===s&&"undefined"!=typeof f[o])throw new Error(o+" is reserved");return new Promise(function(a,p){var b,d,l=Math.floor(Math.random()*n),y=c+t,m=c+r;"undefined"===s&&(f={}),f[o]=l,u.on(y,b=function(n){return"object"!=typeof n?void i("result is not an Object",n):"number"!=typeof n[o]?void i(o+" is not a Number",n):void(n[o]===l&&(u.removeListener(y,b),u.removeListener(m,d),a(e(n,o))))}),u.on(m,d=function(n){return"object"!=typeof n?void i("result is not an Object",n):"number"!=typeof n[o]?void i(o+" is not a Number",n):void(n[o]===l&&(u.removeListener(y,b),u.removeListener(m,d),p(e(n,o))))}),u[choco.trigger](c,f)})}var o="__choco_id",n=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Math.pow(2,53)-1,t="-success",r="-failure",i=function(){return"undefined"!=typeof console?"object"==typeof console.warn?function(){Function.prototype.apply.call(console.warn,console,arguments)}:console.warn.bind(console):function(){}}(),u="function"==typeof Object.keys?function(e){return Object.keys(e)}:function(e){var o,n=[];if(null===e||"object"!=typeof e)throw new TypeError("obj is not an Object");for(o in e)e.hasOwnProperty(o)&&n.push(o);return n};return choco.trigger="emit",choco});